# 8. クイズ詳細ページ

## 概要

クイズの詳細情報、統計、設定を表示し、共有・編集・削除などの操作を行うページ。クイズの現在のステータスや結果の概要も表示する。

## ページ構成

1. **ページヘッダー**

   - クイズタイトル
   - ステータス（下書き/公開済み）
   - 「編集」ボタン
   - 「プレビュー」ボタン
   - アクションドロップダウン
     - 共有
     - 複製
     - エクスポート（プロプラン）
     - 削除

2. **基本情報カード**

   - クイズの説明
   - 作成日/更新日
   - 問題数
   - 合格点
   - 採点モード
   - タグ
   - 表紙画像（プロプラン）

3. **統計サマリーカード**

   - 総回答数
   - 平均スコア
   - 合格率
   - 平均回答時間（プロプラン）
   - ミニグラフ表示

4. **共有設定カード**

   - 共有URL（コピーボタン付き）
   - 埋め込みコード（プロプラン）
   - パスワード設定
   - カスタムサブドメイン設定（プロプラン）
   - QRコード表示（プロプラン）

5. **最近の回答者リスト**

   - 最近5件の回答を表示
   - 回答者名/ID
   - 回答日時
   - スコア
   - 「詳細を見る」リンク

6. **問題一覧**

   - 各問題の簡易表示
   - 問題番号
   - 問題タイプ
   - 問題文（省略表示）
   - 正答率（プロプラン）

7. **設定タブ**

   - 基本設定
   - 詳細設定
   - 回答制限設定
   - 合格証設定（プロプラン）
   - API連携（プロプラン）

8. **アクティビティログ**（プロプラン）
   - クイズに関する操作ログ
   - 日時、ユーザー、アクション

## 技術仕様

- **コンポーネント構成**

  - `QuizDetailHeader.tsx`
  - `QuizInfoCard.tsx`
  - `QuizStatsSummary.tsx`
  - `SharingOptions.tsx`
  - `RecentRespondentsList.tsx`
  - `QuestionSummaryList.tsx`
  - `SettingsTabs.tsx`
  - `ActivityLog.tsx`

- **状態管理**

  - `useQuizDetailStore.ts` - Zustandストア
    - 現在のタブ
    - 共有オプション表示状態
  - TanStack Query
    - クイズ詳細データ取得
    - 統計データ取得
    - 最近の回答取得

- **API連携**

  - クイズ詳細: `/api/quizzes/:id`
  - クイズ統計: `/api/quizzes/:id/stats`
  - 最近の回答: `/api/quizzes/:id/responses`
  - 共有設定更新: `/api/quizzes/:id/sharing`
  - クイズ削除: `/api/quizzes/:id` (DELETE)

- **グラフ表示**

  - Recharts または Chart.jsを使用
  - スコア分布
  - 時系列回答数
  - 問題別正答率

- **レスポンシブ設計**
  - モバイル: 単一カラム、カードをスタック表示
  - タブレット: 2カラムレイアウト、サイドバー付き
  - デスクトップ: 2-3カラムレイアウト、詳細情報表示

## Next.js移行考慮事項

- 静的データ表示はServer Componentで実装
- インタラクティブ部分（タブ、共有機能など）はクライアントコンポーネント化
- データ更新はServer Actionとして実装
- グラフ表示はクライアントコンポーネントとして実装
