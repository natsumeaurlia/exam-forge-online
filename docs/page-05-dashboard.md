# 5. ダッシュボード

## 概要

ログイン後のメインランディングページ。ユーザーのクイズ、結果、統計情報の概要を表示し、主要機能へのクイックアクセスを提供する。

## ページ構成

1. **ヘッダーバー**

   - ロゴ
   - グローバル検索バー
   - 通知ベル
   - ユーザープロフィールドロップダウン

2. **サイドナビゲーション**

   - ダッシュボード
   - クイズ管理
   - 問題バンク（プロプラン）
   - テンプレート
   - レポート・分析
   - メンバー管理
   - 設定

3. **ウェルカムセクション**

   - ユーザー名を含む挨拶
   - 日付
   - 「クイズを作成」主要CTAボタン

4. **ステータスカード**

   - 作成したクイズ数
   - 今月の回答数
   - 平均スコア
   - ストレージ使用量

5. **最近のクイズ**

   - 最近作成または編集した5件のクイズをカード形式で表示
   - クイズタイトル、最終更新日、回答数、平均スコア
   - 「すべて表示」リンク

6. **最近の活動**

   - タイムラインまたはリスト形式
   - 最近の回答、コメント、メンバー参加等のイベント
   - 各アクティビティのインタラクションボタン

7. **使用量/制限表示**

   - プランに基づく使用制限と現在の使用状況
   - プログレスバー表示
   - プランアップグレードプロモーション（該当する場合）

8. **クイックアクション**
   - 「クイズを作成」
   - 「問題バンクを見る」
   - 「結果を分析」
   - 「メンバーを招待」

## 技術仕様

- **コンポーネント構成**

  - `DashboardHeader.tsx`
  - `SideNavigation.tsx`
  - `WelcomeSection.tsx`
  - `StatsCard.tsx`
  - `RecentQuizCard.tsx`
  - `ActivityTimeline.tsx`
  - `UsageMeter.tsx`
  - `QuickActionButton.tsx`

- **状態管理**

  - `useDashboardStore.ts` - Zustandストア
    - サイドバー展開/折りたたみ状態
    - 通知状態
  - TanStack Query
    - クイズ一覧取得
    - 統計情報取得
    - 活動履歴取得

- **データフェッチング**

  ```typescript
  // クイズデータ取得
  const { data: recentQuizzes, isLoading } = useQuery(
    ['recentQuizzes'],
    () => fetchRecentQuizzes(5),
    { staleTime: 5 * 60 * 1000 } // 5分キャッシュ
  );

  // 統計データ取得
  const { data: stats } = useQuery(
    ['dashboardStats'],
    fetchDashboardStats,
    { staleTime: 15 * 60 * 1000 } // 15分キャッシュ
  );
  ```

- **レスポンシブ設計**

  - モバイル: スタック表示、ハンバーガーメニュー付きヘッダー
  - タブレット: 2カラムグリッド、サイドナビゲーション折りたたみ可能
  - デスクトップ: 2-3カラムグリッド、フルサイドナビゲーション表示

- **パフォーマンス最適化**
  - ダッシュボードウィジェットの遅延読み込み
  - データのプリフェッチ
  - 統計情報のメモ化

## Next.js移行考慮事項

- レイアウトは`app/dashboard/layout.tsx`として実装
- 統計情報取得はServer Componentで実装
- ユーザーインタラクション部分のみクライアントコンポーネント化
- データフェッチはReact Server Componentsで最適化
