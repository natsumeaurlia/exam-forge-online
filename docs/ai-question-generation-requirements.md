# AI問題自動生成機能 要件定義書

## 1. 機能概要

### 1.1 目的
ExamForgeユーザーが、教材や参考資料から自動的に高品質な問題を生成できるようにすることで、問題作成の効率を大幅に向上させる。

### 1.2 想定ユーザー
- **教育機関の教員**: 授業資料から定期テストの問題を作成
- **企業の研修担当者**: 研修マニュアルから理解度確認テストを作成
- **資格試験対策校**: 参考書から模擬試験問題を作成
- **個人講師**: オリジナル教材から生徒用の練習問題を作成

### 1.3 期待される効果
- 問題作成時間を従来の1/10に短縮
- 問題の品質と一貫性の向上
- 多様な問題形式の自動生成
- 難易度の適切な調整

## 2. 機能要件

### 2.1 ナレッジベース管理

#### 2.1.1 コンテンツ登録
- **対応ファイル形式**
  - PDF（教科書、参考書、レジュメ）
  - Word文書（.docx）
  - テキストファイル（.txt）
  - Markdown（.md）
  - 画像ファイル（図表、グラフ）※OCR対応
  - YouTube動画（URLから文字起こし）
  - Webページ（URLからコンテンツ抽出）

- **登録方法**
  - ドラッグ&ドロップでファイルアップロード
  - フォルダ単位での一括アップロード
  - URLを指定してWebコンテンツを取り込み
  - 手動でテキスト入力

#### 2.1.2 コンテンツ整理
- **分野・科目による分類**
  - 大分類（例：数学、英語、プログラミング）
  - 中分類（例：代数、幾何、確率）
  - 小分類（例：一次方程式、二次方程式）
  - カスタムタグ付け

- **メタデータ管理**
  - 対象学年・レベル
  - 作成日・更新日
  - 著者・出典情報
  - 関連キーワード

#### 2.1.3 検索・参照機能
- 全文検索
- タグ・分類による絞り込み
- 関連コンテンツの自動提示
- プレビュー機能

### 2.2 AI問題生成

#### 2.2.1 生成パラメータ設定
- **問題数**: 1〜100問を指定
- **問題形式**:
  - 選択式（4択・5択）
  - 正誤問題
  - 穴埋め問題
  - 記述式（短答）
  - 計算問題
  - 図表問題
  - 複合問題

- **難易度**:
  - 初級（基礎的な知識確認）
  - 中級（応用力を問う）
  - 上級（発展的な内容）
  - カスタム（詳細設定）

- **出題範囲**:
  - 特定のナレッジを選択
  - 分野・単元を指定
  - キーワードで範囲指定

#### 2.2.2 生成オプション
- **重要度に基づく出題**
  - キーワードの出現頻度
  - 見出しレベルの重要度
  - 手動での重要箇所マーキング

- **バランス調整**
  - 分野ごとの出題比率
  - 問題形式の配分
  - 難易度の分布

- **カスタマイズ**
  - 問題文のトーン（丁寧語/普通体）
  - 選択肢の順序（ランダム/固定）
  - 解説の詳しさ

#### 2.2.3 生成プロセス
1. ナレッジベースから関連コンテンツを抽出
2. AIが問題候補を複数生成
3. 品質チェック（重複、矛盾、不適切な内容）
4. プレビューで確認
5. 必要に応じて編集
6. クイズに追加

### 2.3 品質管理

#### 2.3.1 自動品質チェック
- **問題文の検証**
  - 文法的な正しさ
  - 明確で曖昧さのない表現
  - 適切な長さ

- **選択肢の検証**
  - 正答の妥当性
  - 誤答の妥当性（もっともらしい誤り）
  - 選択肢間のバランス

- **難易度の検証**
  - 設定難易度との一致度
  - 必要な前提知識のチェック

#### 2.3.2 人間によるレビュー
- **レビューフロー**
  - 生成された問題の一覧表示
  - 問題ごとの承認/却下/修正
  - 一括承認機能
  - コメント・フィードバック機能

- **編集機能**
  - 問題文の修正
  - 選択肢の追加・削除・修正
  - 正答の変更
  - 解説の追加・編集

### 2.4 学習・改善機能

#### 2.4.1 利用実績の分析
- 生成された問題の正答率
- 学習者からのフィードバック
- 問題の使用頻度
- 編集履歴

#### 2.4.2 AIモデルの改善
- よく編集される問題パターンの学習
- 高評価問題の特徴抽出
- 分野別の最適化

## 3. プラン別機能制限

### 3.1 無料プラン
- ナレッジベース容量: 100MB
- 月間生成数: 50問
- 基本的な問題形式のみ
- 自動生成後は必ず手動確認が必要

### 3.2 プロプラン
- ナレッジベース容量: 10GB
- 月間生成数: 1,000問
- 全問題形式対応
- 一括生成・一括承認機能
- 高度なカスタマイズオプション
- 優先的なAI処理

### 3.3 エンタープライズプラン
- ナレッジベース容量: 無制限
- 生成数: 無制限
- 専用AIモデルのカスタマイズ
- APIアクセス
- 専任サポート

## 4. 利用シナリオ

### 4.1 シナリオ1: 定期テスト作成（高校教師）
1. 教科書のPDFをアップロード
2. 「第3章 二次関数」を出題範囲に指定
3. 選択式20問、記述式5問を生成
4. 難易度は「基礎7割、応用3割」に設定
5. 生成された問題を確認・微調整
6. テスト用紙として出力

### 4.2 シナリオ2: 社内研修の理解度チェック（企業研修担当）
1. 研修マニュアル（Word）をアップロード
2. 重要な箇所をハイライト
3. 4択問題を30問生成
4. 各問題に詳細な解説を付与
5. eラーニングシステムに組み込み

### 4.3 シナリオ3: 資格試験対策（予備校講師）
1. 過去問と参考書をナレッジベースに登録
2. 出題傾向を分析
3. 本番形式の模擬問題を生成
4. 難易度を本番相当に調整
5. 解答解説を充実させて配布

## 5. ユーザーインターフェース要件

### 5.1 ナレッジベース管理画面
- ファイルエクスプローラー風のUI
- ドラッグ&ドロップ対応
- プレビュー機能
- 一括操作ツールバー

### 5.2 問題生成画面
- ウィザード形式の設定フロー
- リアルタイムプレビュー
- 生成状況の進捗表示
- バッチ処理のキュー管理

### 5.3 レビュー・編集画面
- 問題カード形式の一覧
- インライン編集
- 一括操作機能
- フィルター・ソート機能

## 6. 技術的制約事項

### 6.1 処理時間
- 問題10問の生成: 約30秒〜1分
- 大量生成時はバックグラウンド処理

### 6.2 コンテンツ制限
- 1ファイルあたり最大50MB
- 1回の生成で最大100問
- 著作権保護されたコンテンツは利用不可

### 6.3 言語対応
- 初期リリース: 日本語のみ
- 将来対応予定: 英語、中国語、韓国語

## 7. セキュリティ・コンプライアンス

### 7.1 データ保護
- アップロードされたコンテンツの暗号化
- チーム間でのデータ分離
- 定期的なバックアップ

### 7.2 著作権配慮
- 出典の自動記録
- 引用範囲の適正化
- 商用利用の制限オプション

### 7.3 倫理的配慮
- 不適切な内容の自動検出・除外
- バイアスの最小化
- 教育的価値の確保

## 8. 成功指標

### 8.1 定量的指標
- 問題作成時間の80%削減
- 生成問題の承認率90%以上
- ユーザー満足度4.5以上（5段階）

### 8.2 定性的指標
- 教員の業務負担軽減
- 問題の質の向上
- 学習効果の改善