# 17. 回答者管理ページ

## 概要
クイズの回答者に関する情報を管理し、分析するページ。クイズごとの回答者一覧、回答詳細、手動採点、フィードバック送信などの機能を提供する。

## ページ構成
1. **ページヘッダー**
   - 「回答者管理」タイトル
   - クイズ選択ドロップダウン
   - 期間フィルター
   - エクスポートボタン（CSV/Excel）

2. **回答概要ダッシュボード**
   - 総回答数
   - ユニーク回答者数
   - 平均スコア
   - 合格率
   - 回答数の時系列グラフ

3. **回答者リスト**
   - テーブル表示
     - 回答者名/メールアドレス
     - 回答日時
     - スコア/合格状態
     - 回答時間
     - クイズ完了状況（完了/中断）
     - ステータス（採点済み/未採点）
   - フィルター機能
     - スコア範囲
     - 合格/不合格
     - 採点状態
     - 回答日
   - ソート機能
   - 検索機能
   - ページネーション

4. **回答詳細/採点ビュー**
   - 回答者情報
   - 回答概要（スコア、時間など）
   - 問題ごとの回答
     - 問題タイプ
     - 問題文
     - 回答者の回答
     - 正解/不正解
     - 配点
     - 手動採点入力（自由記述問題）
     - フィードバックコメント入力
   - 総合フィードバック入力
   - 「採点完了」ボタン
   - 「結果通知を送信」ボタン

5. **一括採点ツール**（プロプラン）
   - 未採点の自由記述問題一覧
   - 問題ごとのグループ表示
   - 回答一覧
   - 採点基準表示
   - 一括採点インターフェース

6. **通知/フィードバック管理**
   - 通知テンプレート選択
   - カスタムメッセージ入力
   - 送信先選択（個別/一括）
   - 送信履歴
   - スケジュール送信設定

7. **不正行為監視**（プロプラン）
   - 不審な行為のログ表示
     - 画面離脱回数
     - 禁止操作試行
     - 異常な回答パターン
   - フラグ付き回答者リスト
   - 詳細ログ閲覧

## 技術仕様
- **コンポーネント構成**
  - `RespondentsHeader.tsx`
  - `ResponsesSummaryDashboard.tsx`
  - `RespondentsTable.tsx`
  - `ResponseDetailView.tsx`
  - `ManualGradingForm.tsx`
  - `BulkGradingTool.tsx`
  - `FeedbackManager.tsx`
  - `ProctoringMonitor.tsx`

- **状態管理**
  - `useRespondentsStore.ts` - Zustandストア
    - フィルター条件
    - 選択された回答者
    - 採点フォーム状態
  - TanStack Query
    - 回答者一覧取得
    - 回答詳細取得
    - 未採点回答取得

- **採点システム**
  - 自動採点ロジック
  - 手動採点インターフェース
  - 採点基準表示
  - 部分点付与機能

- **データ可視化**
  - 回答者分布グラフ
  - スコア分布ヒストグラム
  - 時系列回答グラフ

- **通知システム**
  - メールテンプレート
  - 一括送信機能
  - 送信スケジューリング

- **エクスポート機能**
  - 詳細データのCSV/Excel出力
  - カスタムレポート生成

- **API連携**
  - 回答者一覧取得: `/api/quizzes/:quizId/respondents`
  - 回答詳細取得: `/api/responses/:responseId`
  - 採点更新: `/api/responses/:responseId/grade`
  - フィードバック送信: `/api/responses/:responseId/feedback`
  - 一括採点: `/api/quizzes/:quizId/bulk-grade`
  - 不正行為ログ取得: `/api/responses/:responseId/proctoring-logs`

- **レスポンシブ設計**
  - モバイル: 簡略化された回答者リスト、基本採点機能
  - タブレット: 2カラムレイアウト、標準採点インターフェース
  - デスクトップ: マルチカラムレイアウト、詳細採点・分析ツール

## Next.js移行考慮事項
- 回答者一覧取得はServer Componentで実装
- フィルタリング/ソートはServer Actionsで実装
- 採点インターフェースはクライアントコンポーネント化
- 採点更新処理はServer Actionとして実装
- 通知送信はAPI Routes（またはServer Action）として実装
- エクスポート機能はAPI Routesとして実装